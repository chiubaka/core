{"version":3,"sources":["../src/analytics/PageAnalytics.tsx"],"names":[],"mappings":";;AAAA,+BAA+B;AAC/B,6CAAsC;AAYtC,SAAgB,iBAAiB,CAC/B,gBAAmG;IAEnG,MAAM,IAAK,SAAQ,KAAK,CAAC,SAAgD;QAChE,iBAAiB;YACtB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC1C,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC1C,IAAI,IAAI,CAAC,KAAK,CAAC,uBAAuB,EAAE;gBACtC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,aAAa,EAAE,EAAC,YAAY,EAAE,GAAG,IAAI,GAAG,MAAM,EAAE,EAAC,CAAC,CAAC;aACxE;YACD,IAAI,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE;gBAChC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,EAAC,SAAS,EAAE,GAAG,IAAI,GAAG,MAAM,EAAE,EAAC,CAAC,CAAC;aACtF;QACH,CAAC;QAEM,MAAM;YACX,OAAO,CACL,oBAAC,gBAAgB,oBAAK,IAAI,CAAC,KAAK,EAAG,CACpC,CAAC;QACJ,CAAC;KACF;IAED,SAAS,eAAe,CAAC,KAAsB;QAC7C,OAAO,KAAK,CAAC,SAAS,CAAC;IACzB,CAAC;IAED,OAAO,qBAAO,CAA6C,eAAe,CAAC,CAAC,IAAW,CAAC,CAAC;AAC3F,CAAC;AA3BD,8CA2BC","file":"../../analytics/PageAnalytics.js","sourcesContent":["import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { IAnalyticsInnerState, IAnalyticsState } from \"./model/AnalyticsState\";\n\ndeclare global {\n  // tslint:disable-next-line:interface-name\n  interface Window {\n    fbq: (type: string, event: string, options?: any) => void;\n    gtag: (command: string, type: string, options?: any) => void;\n  }\n}\n\nexport function withPageAnalytics<TOriginalProps extends RouteComponentProps<any>>(\n  WrappedComponent: (React.ComponentClass<TOriginalProps> | React.StatelessComponent<TOriginalProps>),\n) {\n  class Page extends React.Component<TOriginalProps & IAnalyticsInnerState> {\n    public componentDidMount(): void {\n      const path = this.props.location.pathname;\n      const params = this.props.location.search;\n      if (this.props.enableFacebookAnalytics) {\n        window.fbq(\"track\", \"ViewContent\", {content_name: `${path}${params}`});\n      }\n      if (this.props.googleAnalyticsId) {\n        window.gtag(\"config\", this.props.googleAnalyticsId, {page_path: `${path}${params}`});\n      }\n    }\n\n    public render(): JSX.Element {\n      return (\n        <WrappedComponent {...this.props}/>\n      );\n    }\n  }\n\n  function mapStateToProps(state: IAnalyticsState): IAnalyticsInnerState {\n    return state.analytics;\n  }\n\n  return connect<IAnalyticsInnerState, null, TOriginalProps>(mapStateToProps)(Page as any);\n}\n"]}