{"version":3,"sources":["../src/auth/actions/api/AuthApi.ts"],"names":[],"mappings":";;AACA,kDAA+C;AAE/C,0CAAyC;AAEzC,8DAA2D;AAE3D,MAAa,OAAQ,SAAQ,SAAoB;IAC/C,YAAY,UAA2B,+BAAc,CAAC,WAAW,EAAE;QACjE,KAAK,CAAC,OAAO,CAAC,CAAC;IACjB,CAAC;IAEM,KAAK,CAAC,QAAgB,EAAE,QAAgB;QAC7C,OAAO,CAAC,QAAkB,EAAE,QAA0B,EAAE,EAAE;YACxD,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAClC,IAAI,OAAO,CAAC,sBAAsB,IAAI,IAAI,EAAE;gBAC1C,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;gBACjC,OAAO;aACR;YAED,QAAQ,CAAC,qBAAU,EAAE,CAAC,CAAC;YACvB,OAAO,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC;QACtE,CAAC,CAAC;IACJ,CAAC;IAEM,WAAW,CAAC,QAAgB,EAAE,IAAY,EAAE,WAAmB;QACpE,OAAO,CAAC,QAAkB,EAAE,QAA0B,EAAE,EAAE;YACxD,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAClC,IAAI,OAAO,CAAC,sBAAsB,IAAI,IAAI,EAAE;gBAC1C,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC;gBACvC,OAAO;aACR;YAED,QAAQ,CAAC,qBAAU,EAAE,CAAC,CAAC;YACvB,OAAO,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC;QACrF,CAAC,CAAC;IACJ,CAAC;IAEM,sBAAsB,CAAC,QAAgB,EAAE,KAAa;QAC3D,OAAO,CAAC,QAAkB,EAAE,QAA0B,EAAE,EAAE;YACxD,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAClC,IAAI,OAAO,CAAC,sBAAsB,IAAI,IAAI,EAAE;gBAC1C,IAAI,CAAC,kBAAkB,CAAC,wBAAwB,CAAC,CAAC;gBAClD,OAAO;aACR;YAED,QAAQ,CAAC,qBAAU,EAAE,CAAC,CAAC;YACvB,OAAO,OAAO,CAAC,sBAAsB,CAAC,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC;QACpF,CAAC,CAAA;IACH,CAAC;IAEM,MAAM;QACX,OAAO,CAAC,QAAkB,EAAE,QAA0B,EAAE,EAAE;YACxD,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC;QAC7D,CAAC,CAAC;IACJ,CAAC;IAEO,kBAAkB,CAAC,UAAkB;QAC3C,OAAO,CAAC,KAAK,CAAC,sCAAsC,UAAU,qDAAqD,CAAC,CAAC;IACvH,CAAC;CACF;AArDD,0BAqDC","file":"../../../../auth/actions/api/AuthApi.js","sourcesContent":["\nimport { Api } from \"../../../api/actions/Api\";\nimport { IAuthState } from \"../../model/AuthenticationState\";\nimport { startLogin } from \"../creators\";\nimport { AuthDispatch as Dispatch, IAuthApiAdapter } from \"../types\";\nimport { RestApiAdapter } from \"./adapters/RestApiAdapter\";\n\nexport class AuthApi extends Api<IAuthApiAdapter> {\n  constructor(adapter: IAuthApiAdapter = RestApiAdapter.getInstance()) {\n    super(adapter);\n  }\n\n  public login(username: string, password: string) {\n    return (dispatch: Dispatch, getState: () => IAuthState) => {\n      const adapter = this.getAdapter();\n      if (adapter.socialLoginAccessToken == null) {\n        this.unimplementedError(\"login\");\n        return;\n      }\n      \n      dispatch(startLogin());\n      return adapter.login(username, password, dispatch, getState().auth);\n    };\n  }\n\n  public socialLogin(provider: string, code: string, redirectUri: string) {\n    return (dispatch: Dispatch, getState: () => IAuthState) => {\n      const adapter = this.getAdapter();\n      if (adapter.socialLoginAccessToken == null) {\n        this.unimplementedError(\"socialLogin\");\n        return;\n      }\n      \n      dispatch(startLogin());\n      return adapter.socialLogin(provider, code, redirectUri, dispatch, getState().auth);\n    };\n  }\n\n  public socialLoginAccessToken(provider: string, token: string) {\n    return (dispatch: Dispatch, getState: () => IAuthState) => {\n      const adapter = this.getAdapter();\n      if (adapter.socialLoginAccessToken == null) {\n        this.unimplementedError(\"socialLoginAccessToken\");\n        return;\n      }\n\n      dispatch(startLogin());\n      return adapter.socialLoginAccessToken(provider, token, dispatch, getState().auth);\n    }\n  }\n\n  public logout() {\n    return (dispatch: Dispatch, getState: () => IAuthState) => {\n      return this.getAdapter().logout(dispatch, getState().auth);\n    };\n  }\n\n  private unimplementedError(methodName: string) {\n    console.error(`AuthApi adapter does not implement ${methodName}! Implement this method or use a different adapter.`);\n  }\n}\n"]}